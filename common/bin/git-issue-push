#!/bin/bash

BRANCH="$(git symbolic-ref --short HEAD)"
NUMBER=$(echo "$BRANCH" | sed 's@^[^0-9]*\([0-9]\+\).*@\1@')

if [[ $BRANCH == *"issue"* ]] && [ -n "${NUMBER}" ]; then
  message="$@; updates #$NUMBER"
  git add -A
  git commit -m "${message}"
  git push
else
  echo "not an issue branch!"
fi
