# One ring to rule them all

[![PowerShell](https://img.shields.io/badge/PowerShell-7-26405f?logo=powershell)](https://github.com/PowerShell/PowerShell)
[![bash](https://img.shields.io/badge/GNU-Bash-4eaa25?logo=gnubash)](https://www.gnu.org/software/bash/)
[![Windows10](https://img.shields.io/badge/Windows-10-0078D6?logo=windows)](https://www.microsoft.com/en-us/software-download/windows10%20)
[![Xubuntu](https://img.shields.io/badge/Xubuntu-22.10-0044aa?logo=data:image/svg%2bxml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTUwMS4zMTIgLTQ5NC4wMzIpIj48Y2lyY2xlIGN4PSI1MzMuMzEyIiBjeT0iNTI2LjAzMiIgcj0iMzIiIHN0eWxlPSJmaWxsOiMwNGE7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmUiLz48cGF0aCBkPSJNNTI0LjAxMyA1MTEuNzU0Yy0uNDYyIDIuMjk2LjIwMiA0LjkyMyAxLjEzMSA4LjEuMDU3LjE5Mi0uMDUyLjQzNy0uMTUuNDY2LS40MjIuMTIzLTEuMTQ1LS4wMDgtMS4yODUtLjI5Ni0uNzI0LTEuNDg2LTEuMDY5LTMuMDA2LTEuOTE0LTQuNDctLjU4NS0xLjAxMi0xLjE5LTEuOTc4LTEuOTExLTIuNjMxLS44NzYtLjc5My0xLjU2Mi0uOTUtMi40OTktLjU1OC0xLjE4Mi40OTQtMS44OTYgMS42NzgtMi4xNCAyLjc0LS4yNDkgMS4wNzYtLjE0NSAyLjMyLjA1IDMuNC4yMjggMS4yNy41MiAyLjI3Mi44OTQgMy40Ni0uMjg2Ljg0NC0yLjAwNCA1LjQ3Ny0yLjQyIDguNjktLjUzMyA0LjEyMi0yLjAzMyAxNi41OTggMTEuNzE0IDE1LjIxIDUuMDctLjUxIDkuMjAyLTIuMjg4IDEzLjExMS00LjExIDEuNzkyLS44MzYgNC4wNC0xLjkxNCA2LjItMy4xIDIuMTYyLTEuMTg4IDQuMTY4LTIuNDU0IDUuNy0zLjggMS41MzYtMS4zNSAyLjY1NC0yLjgyOCAyLjQ1LTQuMy0uMzI4LTIuMzc0LTEuOTAyLTQuMTM4LTQtNS41LTIuMTA1LTEuMzY4LTUuNzAxLTIuNjQtOC4zLTMuMzk5LTMuNDEtLjk5Ni02LjA1LTEuMzgzLTkuMjUtMS41NTctLjE3OS0zLjI0Mi4yNTMtNy41MS0xLjgtOS45OTUtLjQ3NS0uNTc1LTEuMTY4LS45NDEtMi0xLTEuMzM2LjA1NC0zLjE1MS41Mi0zLjU4IDIuNjV6IiBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIvPjxwYXRoIGQ9Ik01NDAuMTU4IDUxNy41NTFjLS4wMzQuNzk5LjEzMyAyLjUyMSAxLjE4IDIuNjU0IDEuMjQ3LjE0NyAxLjY0Ny0uODggMS43ODMtMS42ODMuNDMzLTIuNTU1LjU1My0zLjMxOS43Ny01LjYzNC4yNTQtMi43MjguOTI1LTcuMzMxLS4yNDctNi45MDItMS4xODcuNDM1LTIuMTMgNC4xMTEtMi40MzggNS42NTItLjI0IDEuMi0uOTg5IDQuNTQyLTEuMDQ4IDUuOTEzek01NDUuNjIzIDUxOC4xM2MtLjY4MyAxLjU5Ni0xLjAwNyAyLjk3NC0uMDYyIDMuNDQyIDEuMTI1LjU1NyAyLjA5OC0uNTIzIDIuNDE1LTEuMjczLjk1NC0yLjI2MiAxLjQ4My0zLjYzMiAyLjIyLTUuMzQzIDEuMDgzLTIuNTE3IDMuNzg3LTcuMzUyIDIuMDAzLTcuMDk2LTEuMjUyLjE4LTIuOTM0IDMuMzU4LTMuNzQyIDQuNzA2LTEuMDQgMS43MzItMS44NSAzLjI2Ny0yLjgzNCA1LjU2NXoiIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lIi8+PC9nPjwvc3ZnPg==)](https://xubuntu.org/)
<br>
[![CircleCI](https://dl.circleci.com/status-badge/img/gh/martukas/dotfiles/tree/master.svg?style=svg)](https://dl.circleci.com/status-badge/redirect/gh/martukas/dotfiles/tree/master)
[![pre-commit](https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit)](https://github.com/pre-commit/pre-commit)
[![Codacy Badge](https://app.codacy.com/project/badge/Grade/e85734ffda084555a2a4ffd960e4074c)](https://app.codacy.com/gh/martukas/dotfiles/dashboard?utm_source=gh&utm_medium=referral&utm_content=&utm_campaign=Badge_grade)

These are my dotfiles and bootstrap scripts for Linux and Windows systems.<br>
The git/bash/ssh parts should work for Mac as well.

## Bootstrapping

Let's make as few assumptions as possible about what's available on the machine - no git, no Python.<br>
These scripts will install the essentials, set up ssh credentials and clone this repo.

### Linux

This one-line command should get things going:

```shell
bash <(wget -qO- https://github.com/martukas/dotfiles/raw/master/bootstrap/bootstrap.sh)
```

### Windows

Firstly, you want to prevent OneDrive from taking over your home directories as described [here](https://answers.microsoft.com/en-us/windows/forum/all/taking-back-control-of-your-folders-from-onedrive/7b7ad05e-8b05-4bcd-9772-9e4eee880346):

* Open 'gpedit' from the Start menu
* Follow `Administrative Templates`>`Windows Components`>`OneDrive`
* Edit and enable `Prevent the usage of OneDrive for file storage`.

Run these commands in PowerShell with Admin privileges:

```powershell
Set-ExecutionPolicy Unrestricted
Invoke-WebRequest -Uri "https://github.com/martukas/dotfiles/raw/master/bootstrap/bootstrap.ps1" -OutFile "bootstrap.ps1"
.\bootstrap.ps1
```

You will have to reboot before you start using the utilities below.

## Routine use

For first-time setup:

* go to `~/dev/dotfiles`
* run either `install.ps1` or `install.sh` as per shell type

These scripts will set up symlinks, command aliases and also run [SuperPack](https://github.com/martukas/superpack) to offer you installation of packages appropriate for your system.

Henceforth, you can update locally with these aliases:

* `dfu` - dotfiles update, pulls and runs appropriate install script
* `df-upgrade` - upgrades all submodules to latest versions in remote repos

Pushing local changes to repo:

* The usual add-commit-push ritual, or the `commit-push` alias
* symlinked files will stay up to date
* on Xubuntu, occasionally run `df-save` to extract and save settings for guake
* "dirty" state in the `/private` subrepo will be ignored. Commit changes to that submodule separately, before you commit in parent dir

## Manual installation required

* [InSync](https://www.insynchq.com/downloads/linux)
* [Jetbrains remote](https://www.jetbrains.com/help/idea/remote-development-overview.html)
* [CLion + PlatformIO integration](https://docs.platformio.org/en/latest/integration/ide/clion.html)

## Future improvements

<details>
<summary>Roadmap</summary>

* install ohmyposh for ps in linux
* include .profile?
* install [conan](https://docs.conan.io/2/installation.html)
* clementine remote config & script
* pre-commit hook for guake settings
* Code style links optional
* Dark mode for Keepass [1](https://github.com/xatupal/KeeTheme) [2](https://github.com/BradyThe/DarkenKP)
* Foreign keyboards
* Linux:
  * Xubuntu dark mode
  * change terminal name via ssh
  * NPM
  * synaptic
  * baobab
  * circleci
  * libreoffice
* Windows:
  * steam
  * dotnet
  * jdk
  * google drive
  * configure night light
  * optional sshd and remote-desktop config
  * issue-related git aliases for pwsh
* Configure rustup shell completion [here](https://rust-lang.github.io/rustup/installation/index.html)
* Try out [oh-my-fish](https://github.com/oh-my-fish/oh-my-fish)
* Set up conditional GPG things in `.gitconfig_local` or some such
* Adopt <https://github.com/pop-os/shell> ?
* Migrate to <https://www.chezmoi.io/> ?

</details>
